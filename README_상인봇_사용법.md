# 니나브 떠상봇 - 새로운 기능 사용법

## 🎉 추가된 기능들

### 📋 새로운 Discord 명령어

1. **`!상인`** - 현재 상인 정보 및 활성 상인 조회
2. **`!상인목록`** - 전체 상인 목록 조회
3. **`!현재상인`** - 현재 시간에 활성화된 상인만 조회
4. **`!스케줄`** - 오늘의 상인 스케줄 조회
5. **`!스케줄 월요일`** - 특정 요일의 스케줄 조회 (일~토 가능)
6. **`!상인정보 벤`** - 특정 상인의 상세 정보 조회
7. **`!아이템검색 카마인`** - 특정 아이템을 파는 상인 찾기
8. **`!도움말`** - 명령어 도움말

### 🔧 개선된 기능들

- **등급별 아이템 표시**: 이모지로 아이템 등급 구분 (⚪일반, 🟢고급, 🔵희귀, 🟣영웅, 🟠전설)
- **스케줄 정보**: 요일별, 시간별 상인 출현 정보
- **실시간 활성 상인**: 현재 시간 기준으로 이용 가능한 상인 표시
- **상세 검색**: 상인명, 지역명, 아이템명으로 다양한 검색 가능
- **메시지 분할**: 긴 메시지 자동 분할 전송

## 🚀 사용 방법

### 1. 파일 구성 확인
```
디스코드봇/
├── 니나브_떠상봇.py (메인 봇 파일)
├── merchant_parser.py (새로 추가된 파서)
└── test_new_features.py (테스트 파일)
```

### 2. 봇 실행
1. `니나브_떠상봇.py` 실행
2. Discord 봇 토큰과 채널 ID 입력
3. "봇 시작" 버튼 클릭

### 3. Discord에서 명령어 사용

#### 기본 사용 예시:
```
!상인목록
→ 모든 상인과 주요 판매 아이템 표시

!스케줄
→ 오늘의 상인 스케줄 표시

!스케줄 금요일
→ 금요일 상인 스케줄 표시

!상인정보 벤
→ 벤 상인의 상세 정보 (스케줄, 판매 아이템 등)

!아이템검색 카마인
→ 카마인을 파는 상인 찾기

!현재상인
→ 지금 이용 가능한 상인들만 표시
```

## 📊 출력 예시

### 상인 목록 (`!상인목록`)
```
🏪 떠돌이 상인 목록 🏪
===================================

1. 📍 아르테미스
👤 상인: 벤
🛍️ 주요 아이템:
  • 🟣 카마인
  • 🟣 두근두근 상자

2. 📍 유디아
👤 상인: 루카스
🛍️ 주요 아이템:
  • 🟣 하늘을 비추는 기름
  • 🔵 유디아 주술서
```

### 상인 상세 정보 (`!상인정보 벤`)
```
🏪 벤 (아르테미스) 🏪
===================================

📅 출현 스케줄
• 일요일: 04:00:00 (05:30:00)
• 일요일: 16:00:00 (05:30:00)
• 월요일: 04:00:00 (05:30:00)

🛍️판매 아이템
• 🟣 카마인 (영웅 카드)
• 🟣 두근두근 상자 (영웅 아이템)
• 🔵 아르테미스 성수 (희귀 아이템)
```

### 아이템 검색 (`!아이템검색 카마인`)
```
🔍 '카마인' 검색 결과 🔍
==============================

📍 아르테미스 - 벤
🛍️ 🟣 카마인 (영웅 카드)
```

## 🔄 자동 모니터링

봇은 설정된 간격(기본 30초)마다 자동으로:
- API에서 최신 상인 정보 확인
- 변경사항 감지시 자동으로 채널에 알림 전송
- 현재 활성 상인과 전체 상인 목록 함께 제공

## ⚙️ 설정 옵션

- **모니터링 간격**: GUI에서 10~300초 사이로 조정 가능
- **채널 설정**: 알림을 받을 Discord 채널 ID 설정
- **로그 확인**: GUI에서 실시간 로그 확인 가능

## 🐛 문제 해결

### 일반적인 문제들:
1. **"merchant_parser 모듈을 찾을 수 없음"**
   - `merchant_parser.py` 파일이 같은 폴더에 있는지 확인

2. **"데이터 형식이 올바르지 않음"**
   - API 응답 구조가 변경되었을 수 있음
   - "API 테스트" 버튼으로 연결 확인

3. **명령어가 작동하지 않음**
   - 봇이 해당 채널에 메시지 읽기/쓰기 권한이 있는지 확인
   - 명령어 앞에 `!` 기호 확인

### 로그 확인:
GUI 하단의 로그 창에서 실시간으로 봇 상태와 오류 메시지를 확인할 수 있습니다.

## 📈 향후 개선 계획

- 알림 설정 (특정 아이템 입고시 알림)
- 즐겨찾기 상인 설정
- 통계 기능 (상인 출현 빈도 등)
- 웹 대시보드 연동

---

**© 2024 니나브 떠상봇 - Premium Edition**
